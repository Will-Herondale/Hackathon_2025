<nav class="bg-white dark:bg-gray-800 shadow-md fixed w-full top-0 z-40 transition-colors duration-200">
    <div class="container mx-auto px-4">
        <div class="flex justify-between items-center h-16">
            <!-- Logo -->
            <div class="flex items-center space-x-2">
                <a href="{{ url_for('main.index') }}" class="flex items-center space-x-2">
                    <i class="fas fa-rocket text-blue-600 text-2xl"></i>
                    <span class="text-xl font-bold text-gray-800 dark:text-white">Lakshya</span>
                </a>
            </div>

            <!-- Desktop Navigation -->
            <div class="hidden md:flex items-center space-x-6">
                {% if current_user.is_authenticated %}
                    <a href="{{ url_for('dashboard.index') }}" class="nav-link text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition">
                        <i class="fas fa-chart-line mr-1"></i> Dashboard
                    </a>
                    <a href="{{ url_for('profile.view', user_id=current_user.id) }}" class="nav-link text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition">
                        <i class="fas fa-user mr-1"></i> Portfolio
                    </a>
                    <a href="{{ url_for('events.browse') }}" class="nav-link text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition">
                        <i class="fas fa-calendar mr-1"></i> Events
                    </a>
                    <a href="{{ url_for('main.career_advisor') }}" class="nav-link text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition">
                        <i class="fas fa-robot mr-1"></i> Career Advisor
                    </a>
                    <a href="{{ url_for('colleges.browse') }}" class="nav-link text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition">
                        <i class="fas fa-university mr-1"></i> Colleges
                    </a>
                    {% if current_user.user_type == 'kid' %}
                    <a href="{{ url_for('dashboard.collage') }}" class="nav-link text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition">
                        <i class="fas fa-images mr-1"></i> My Dream Collage
                    </a>
                    {% endif %}
                    {% if current_user.user_type == 'adult' %}
                    <a href="{{ url_for('jobs.scroller') }}" class="nav-link text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition">
                        <i class="fas fa-briefcase mr-1"></i> Jobs
                    </a>
                    {% endif %}

                    <!-- User Dropdown -->
                    <div class="relative" x-data="{ open: false }">
                        <button @click="open = !open" class="flex items-center space-x-2 text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition">
                            <img src="{{ current_user.profile_data.get('avatar', '/static/img/default-avatar.png') }}"
                                 alt="Profile"
                                 class="w-8 h-8 rounded-full object-cover">
                            <span>{{ current_user.name }}</span>
                            <i class="fas fa-chevron-down text-sm"></i>
                        </button>

                        <div x-show="open"
                             @click.away="open = false"
                             class="absolute right-0 mt-2 w-48 bg-white dark:bg-gray-700 rounded-lg shadow-lg py-2"
                             style="display: none;">
                            <a href="{{ url_for('profile.edit') }}" class="block px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600">
                                <i class="fas fa-edit mr-2"></i> Edit Profile
                            </a>
                            <a href="{{ url_for('profile.settings') }}" class="block px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600">
                                <i class="fas fa-cog mr-2"></i> Settings
                            </a>
                            <div class="border-t border-gray-200 dark:border-gray-600 my-1"></div>
                            <button onclick="toggleUserMode()" class="w-full text-left px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600">
                                <i class="fas fa-exchange-alt mr-2"></i>
                                Switch to {{ 'Adult' if current_user.user_type == 'kid' else 'Kid' }} Mode
                            </button>
                            <div class="border-t border-gray-200 dark:border-gray-600 my-1"></div>
                            <a href="{{ url_for('auth.logout') }}" class="block px-4 py-2 text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-600">
                                <i class="fas fa-sign-out-alt mr-2"></i> Logout
                            </a>
                        </div>
                    </div>
                {% else %}
                    <a href="{{ url_for('main.index') }}" class="nav-link text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition">
                        Home
                    </a>
                    <a href="{{ url_for('events.browse') }}" class="nav-link text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition">
                        Events
                    </a>
                    <a href="{{ url_for('auth.login') }}" class="text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition">
                        Login
                    </a>
                    <a href="{{ url_for('auth.register') }}" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition">
                        Sign Up
                    </a>
                {% endif %}
            </div>

            <!-- Mobile Menu Button -->
            <button id="mobile-menu-btn" class="md:hidden text-gray-700 dark:text-gray-300">
                <i class="fas fa-bars text-2xl"></i>
            </button>
        </div>

        <!-- Mobile Menu -->
        <div id="mobile-menu" class="md:hidden hidden pb-4">
            {% if current_user.is_authenticated %}
                <a href="{{ url_for('dashboard.index') }}" class="block py-2 text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400">
                    <i class="fas fa-chart-line mr-2"></i> Dashboard
                </a>
                <a href="{{ url_for('profile.view', user_id=current_user.id) }}" class="block py-2 text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400">
                    <i class="fas fa-user mr-2"></i> Portfolio
                </a>
                <a href="{{ url_for('events.browse') }}" class="block py-2 text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400">
                    <i class="fas fa-calendar mr-2"></i> Events
                </a>
                <a href="{{ url_for('main.career_advisor') }}" class="block py-2 text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400">
                    <i class="fas fa-robot mr-2"></i> Career Advisor
                </a>
                <a href="{{ url_for('colleges.browse') }}" class="block py-2 text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400">
                    <i class="fas fa-university mr-2"></i> Colleges
                </a>
                {% if current_user.user_type == 'kid' %}
                <a href="{{ url_for('dashboard.collage') }}" class="block py-2 text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400">
                    <i class="fas fa-images mr-2"></i> My Dream Collage
                </a>
                {% endif %}
                {% if current_user.user_type == 'adult' %}
                <a href="{{ url_for('jobs.scroller') }}" class="block py-2 text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400">
                    <i class="fas fa-briefcase mr-2"></i> Jobs
                </a>
                {% endif %}
                <a href="{{ url_for('profile.settings') }}" class="block py-2 text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400">
                    <i class="fas fa-cog mr-2"></i> Settings
                </a>
                <a href="{{ url_for('auth.logout') }}" class="block py-2 text-red-600 dark:text-red-400">
                    <i class="fas fa-sign-out-alt mr-2"></i> Logout
                </a>
            {% else %}
                <a href="{{ url_for('main.index') }}" class="block py-2 text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400">
                    Home
                </a>
                <a href="{{ url_for('events.browse') }}" class="block py-2 text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400">
                    Events
                </a>
                <a href="{{ url_for('auth.login') }}" class="block py-2 text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400">
                    Login
                </a>
                <a href="{{ url_for('auth.register') }}" class="block py-2 bg-blue-600 text-white text-center rounded-lg hover:bg-blue-700">
                    Sign Up
                </a>
            {% endif %}
        </div>
    </div>
</nav>

<!-- Alpine.js for dropdown functionality -->
<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

<style>
    .animate-slide-in {
        animation: slideIn 0.3s ease-out;
    }

    @keyframes slideIn {
        from {
            transform: translateX(100%);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }
</style>
